<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="layouts :: header"></head>
<body>

<nav th:replace="layouts :: navbar"></nav>

<div class="container">
    <H3>Main Dashboard</H3>
    <a th:text="${versionNumber}"></a>
    <hr>
    <h4>Current Projects</h4>
    <div class="row">
        <div class="col-md-6">
            <table class="table table-bordered table-striped">
                <thead class="thead-dark">
                <tr>
                    <th class="thead-dark">Project Name</th>
                    <th class="thead-dark">Project Stage</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="project : ${projects}">
                    <td th:text="*{project.name}">
                    <td th:text="${project.stage}">
                </tr>
                </tbody>
            </table>
        </div>
        <div class="col-md-4">
            <canvas id="myPieChart" height="50" width="50"></canvas>
            <!--                This is how we can access data from controller inside thymeleaf webpage. Note that this
            variable is added via HomeController using model.addAttribute("projectStatusCnt", jsonString).
                At this moment we are dealing with data from database converted into JSON using objectMapper.
                -->
            <script>

                var chartData = "[[${projectStatusCnt}]]";
            </script>

        </div>
    </div>

</div>

<div class="container">
    <h4>Current Employees</h4>
    <div class="row">
        <div class="col-md-6">
            <table class="table table-bordered table-striped">
                <thead class="thead-dark">
                <tr>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Project Count</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="employeesListProjectCount : ${employeesListProjectCount}">
                    <td th:text="${employeesListProjectCount.firstName}">
                    <td th:text="${employeesListProjectCount.lastName}">
                    <td th:text="${employeesListProjectCount.projectCount}">
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script type="text/javascript" th:src="@{js/myChart.js}"></script>
</body>

</html>